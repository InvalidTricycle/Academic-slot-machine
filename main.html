<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦æœ¯ç‚¼é‡‘æœ¯å£« | The Academic Alchemist</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Serif SC', serif;
            background-color: #f0f4f8;
            background-image: radial-gradient(#e2e8f0 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .slot-window {
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
            background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 20%, #e2e8f0 80%, #f8fafc 100%);
        }
        .mono-font {
            font-family: 'Roboto Mono', monospace;
        }
        @keyframes spin {
            0% { transform: translateY(-2px); }
            100% { transform: translateY(2px); }
        }
        .spinning-text {
            filter: blur(1px);
            animation: spin 0.1s infinite alternate;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // æ•°æ®åº“ï¼šå·¦è¾¹æ˜¯å¸¸è§çš„â€œç¥è¯â€æˆåˆ†ï¼Œå³è¾¹æ˜¯å¸¸è§ç–¾ç—…
        // ç°åœ¨ä½¿ç”¨ keywords æ•°ç»„æ¥å­˜å‚¨å¤šä¸ªåŒä¹‰æ£€ç´¢è¯
        const substances = [
            { cn: "å¤§è’œæå–ç‰©", en: "Garlic Extract", keywords: ["Garlic", "Allium Sativum"] },
            { cn: "å§œé»„ç´ ", en: "Curcumin", keywords: ["Curcumin", "Turmeric", "Diferuloylmethane"] },
            { cn: "ç»¿èŒ¶å¤šé…š", en: "Green Tea Polyphenols", keywords: ["Green Tea", "EGCG", "Catechins"] },
            { cn: "ç™½è—œèŠ¦é†‡", en: "Resveratrol", keywords: ["Resveratrol", "Stilbenes"] },
            { cn: "ç»´ç”Ÿç´ C", en: "Vitamin C", keywords: ["Ascorbic Acid", "Vitamin C", "L-ascorbic acid"] },
            { cn: "ç›Šç”ŸèŒ", en: "Probiotics", keywords: ["Probiotics", "Microbiota", "Gut Flora", "Lactobacillus"] },
            { cn: "äºŒç”²åŒèƒ", en: "Metformin", keywords: ["Metformin", "Glucophage"] },
            { cn: "å’–å•¡å› ", en: "Caffeine", keywords: ["Caffeine", "Coffee", "Theine"] },
            { cn: "çº³è±†æ¿€é…¶", en: "Nattokinase", keywords: ["Nattokinase", "Bacillus Subtilis"] },
            { cn: "å†¬è™«å¤è‰", en: "Cordyceps", keywords: ["Cordyceps", "Mushroom Extract"] },
            { cn: "è¾…é…¶Q10", en: "Coenzyme Q10", keywords: ["Coenzyme Q10", "Ubiquinone"] },
            { cn: "é˜¿å¸åŒ¹æ—", en: "Aspirin", keywords: ["Aspirin", "Acetylsalicylic Acid", "NSAIDs"] },
            { cn: "ç”Ÿé…®é¥®é£Ÿ", en: "Ketogenic Diet", keywords: ["Ketogenic Diet", "Keto Diet", "Low-Carbohydrate Diet"] },
            { cn: "æ°¢æ°”", en: "Molecular Hydrogen", keywords: ["Hydrogen Gas", "Molecular Hydrogen"] },
            { cn: "è¤ªé»‘ç´ ", en: "Melatonin", keywords: ["Melatonin", "N-Acetyl-5-methoxytryptamine"] }
        ];

        const diseases = [
            { cn: "æ–°å† è‚ºç‚", en: "COVID-19", keywords: ["COVID-19", "SARS-CoV-2", "Coronavirus Infection"] },
            { cn: "ç™Œç—‡", en: "Cancer", keywords: ["Neoplasms", "Cancer", "Tumors", "Malignancy"] },
            { cn: "é˜¿å°”èŒ¨æµ·é»˜ç—‡", en: "Alzheimer's", keywords: ["Alzheimer Disease", "Dementia", "Amyloid", "Cognitive Decline"] },
            { cn: "æŠ‘éƒç—‡", en: "Depression", keywords: ["Depression", "Depressive Disorder", "Mood Disorders"] },
            { cn: "2å‹ç³–å°¿ç—…", en: "Type 2 Diabetes", keywords: ["Diabetes Mellitus, Type 2", "Insulin Resistance", "Hyperglycemia"] },
            { cn: "è‚¥èƒ–", en: "Obesity", keywords: ["Obesity", "Overweight", "Body Mass Index"] },
            { cn: "è¡°è€", en: "Aging", keywords: ["Aging", "Senescence", "Longevity", "Life Span"] },
            { cn: "é«˜è¡€å‹", en: "Hypertension", keywords: ["Hypertension", "High Blood Pressure"] },
            { cn: "è‡ªé—­ç—‡", en: "Autism", keywords: ["Autism Spectrum Disorder", "ASD"] },
            { cn: "è‚ æ˜“æ¿€ç»¼åˆå¾", en: "IBS", keywords: ["Irritable Bowel Syndrome", "IBS"] },
            { cn: "å‹ƒèµ·åŠŸèƒ½éšœç¢", en: "Erectile Dysfunction", keywords: ["Erectile Dysfunction", "Sexual Dysfunction"] },
            { cn: "è„±å‘", en: "Hair Loss", keywords: ["Alopecia", "Hair Loss"] },
            { cn: "å¤±çœ ", en: "Insomnia", keywords: ["Sleep Initiation and Maintenance Disorders", "Insomnia", "Sleep Quality"] },
            { cn: "ç‚ç—‡é£æš´", en: "Cytokine Storm", keywords: ["Cytokine Release Syndrome", "Hyperinflammation", "Cytokine Storm"] }
        ];

        const loadingPhrases = [
            "æ­£åœ¨è¿›è¡ŒPå€¼æ“çºµ...",
            "æ­£åœ¨å‰”é™¤å¼‚å¸¸æ•°æ®ç‚¹...",
            "æ­£åœ¨å¯»æ‰¾æ˜¾è‘—æ€§å·®å¼‚...",
            "æ­£åœ¨è”ç³»æ å¤ºæ€§æœŸåˆŠ...",
            "æ­£åœ¨ä¸ºäº†æ¯•ä¸šæ‹¼å‡‘æ•°æ®...",
            "æ­£åœ¨ç»˜åˆ¶ç²¾ç¾çš„æŸ±çŠ¶å›¾...",
            "ç›¸å…³æ€§å°±æ˜¯å› æœæ€§...",
            "æ­£åœ¨å¿½è§†æ··æ‚å› ç´ ...",
            "æ­£åœ¨è¿›è¡Œäº‹ååˆ†æ..."
        ];

        const App = () => {
            const [leftIndex, setLeftIndex] = useState(0);
            const [rightIndex, setRightIndex] = useState(0);
            const [isSpinning, setIsSpinning] = useState(false);
            const [result, setResult] = useState(null);
            const [loadingText, setLoadingText] = useState("");

            const spin = () => {
                if (isSpinning) return;
                
                setIsSpinning(true);
                setResult(null);
                
                let spins = 0;
                const maxSpins = 20; // è§†è§‰ä¸Šçš„è·³åŠ¨æ¬¡æ•°
                const intervalId = setInterval(() => {
                    setLeftIndex(Math.floor(Math.random() * substances.length));
                    setRightIndex(Math.floor(Math.random() * diseases.length));
                    setLoadingText(loadingPhrases[Math.floor(Math.random() * loadingPhrases.length)]);
                    
                    spins++;
                    if (spins >= maxSpins) {
                        clearInterval(intervalId);
                        setIsSpinning(false);
                        generateResult();
                    }
                }, 100);
            };

            const generateResult = () => {
                // å®é™…ä¸Šæœ€åçš„ç»“æœä¹Ÿæ˜¯éšæœºç¡®å®šçš„ï¼Œç¡®ä¿éšæœºæ€§
                const finalLeft = Math.floor(Math.random() * substances.length);
                const finalRight = Math.floor(Math.random() * diseases.length);
                
                setLeftIndex(finalLeft);
                setRightIndex(finalRight);

                const sub = substances[finalLeft];
                const dis = diseases[finalRight];

                // æ ¸å¿ƒä¿®æ”¹ï¼šç”ŸæˆåŒ…å« OR é€»è¾‘çš„ PubMed æ£€ç´¢å¼
                const subKeywords = sub.keywords.map(k => `${k}[Title/Abstract]`).join(" OR ");
                const disKeywords = dis.keywords.map(k => `${k}[Title/Abstract]`).join(" OR ");
                
                // ç»„åˆæŸ¥è¯¢ï¼š(æˆåˆ†å…³é”®è¯ OR ...)[TA] AND (ç–¾ç—…å…³é”®è¯ OR ...)[TA]
                const query = `(${subKeywords}) AND (${disKeywords})`;
                const url = `https://pubmed.ncbi.nlm.nih.gov/?term=${encodeURIComponent(query)}&sort=date`;

                setResult({
                    sub: sub,
                    dis: dis,
                    query: query,
                    url: url
                });
            };

            return (
                <div className="min-h-screen flex flex-col items-center py-10 px-4 max-w-3xl mx-auto">
                    {/* Header */}
                    <header className="text-center mb-10">
                        <h1 className="text-4xl md:text-5xl font-bold text-slate-800 mb-2">å­¦æœ¯ç‚¼é‡‘æœ¯ç”Ÿæˆå™¨</h1>
                        <p className="text-slate-600 italic text-lg">"åªè¦ä½ æ•¢æœï¼Œæˆ‘å°±æ•¢æœ‰è®ºæ–‡ã€‚"</p>
                        <div className="mt-2 inline-block bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-sm border border-yellow-300">
                            âš ï¸ è­¦å‘Šï¼šæœ¬é¡µé¢çº¯å±è®½åˆºï¼Œè¯·å‹¿ç”¨äºåŒ»ç–—å»ºè®®
                        </div>
                    </header>

                    {/* Machine Interface */}
                    <div className="bg-slate-800 p-4 rounded-xl shadow-2xl w-full border-4 border-slate-600">
                        <div className="flex flex-col md:flex-row gap-4 mb-6">
                            
                            {/* Left Wheel: Substances */}
                            <div className="flex-1">
                                <div className="text-center text-slate-300 mb-2 text-sm tracking-widest uppercase">ç¥å¥‡æˆåˆ† (Input)</div>
                                <div className="slot-window h-32 md:h-40 rounded-lg flex items-center justify-center border-4 border-slate-500 bg-white overflow-hidden relative">
                                    <div className={`text-2xl md:text-3xl font-bold text-slate-800 text-center px-2 ${isSpinning ? 'spinning-text' : ''}`}>
                                        {substances[leftIndex].cn}
                                        <div className="text-sm text-slate-500 font-normal mt-1 mono-font">
                                            {substances[leftIndex].en}
                                        </div>
                                    </div>
                                    {/* Decorative gradient overlay for 3D effect */}
                                    <div className="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/20 pointer-events-none"></div>
                                </div>
                            </div>

                            {/* Divider */}
                            <div className="flex items-center justify-center">
                                <span className="text-3xl md:text-4xl text-white font-bold">Ã—</span>
                            </div>

                            {/* Right Wheel: Diseases */}
                            <div className="flex-1">
                                <div className="text-center text-slate-300 mb-2 text-sm tracking-widest uppercase">é‡å¤§ç–¾ç—… (Target)</div>
                                <div className="slot-window h-32 md:h-40 rounded-lg flex items-center justify-center border-4 border-slate-500 bg-white overflow-hidden relative">
                                    <div className={`text-2xl md:text-3xl font-bold text-red-700 text-center px-2 ${isSpinning ? 'spinning-text' : ''}`}>
                                        {diseases[rightIndex].cn}
                                        <div className="text-sm text-red-400 font-normal mt-1 mono-font">
                                            {diseases[rightIndex].en}
                                        </div>
                                    </div>
                                    <div className="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/20 pointer-events-none"></div>
                                </div>
                            </div>
                        </div>

                        {/* Control Panel */}
                        <div className="flex flex-col items-center justify-center gap-4">
                            <button 
                                onClick={spin} 
                                disabled={isSpinning}
                                className={`
                                    w-full md:w-auto px-8 py-4 rounded-lg font-bold text-xl transition-all transform active:scale-95
                                    shadow-[0_4px_0_rgb(0,0,0,0.4)] active:shadow-none active:translate-y-1
                                    ${isSpinning 
                                        ? 'bg-slate-500 text-slate-300 cursor-not-allowed' 
                                        : 'bg-emerald-500 hover:bg-emerald-400 text-white border-b-4 border-emerald-700'}
                                `}
                            >
                                {isSpinning ? loadingText : "å¼€å§‹â€œç§‘ç ”â€ (GENERATE HYPOTHESIS)"}
                            </button>
                        </div>
                    </div>

                    {/* Result Section */}
                    {result && !isSpinning && (
                        <div className="mt-8 w-full animate-[fadeIn_0.5s_ease-out]">
                            <div className="bg-white border border-slate-200 rounded-lg shadow-lg p-6 md:p-8 relative overflow-hidden">
                                <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"></div>
                                
                                <h2 className="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                                    <span>ğŸ‰</span> æ­å–œï¼æ‚¨å‘ç°äº†ä¸€ä¸ªæ½œåœ¨çš„è¯ºè´å°”å¥–è¯¾é¢˜ï¼š
                                </h2>
                                
                                <div className="bg-slate-50 p-4 rounded border border-slate-200 mb-6">
                                    <p className="text-lg md:text-xl text-center font-serif text-slate-700 leading-relaxed">
                                        â€œæˆ‘ä»¬è§‚å¯Ÿåˆ° 
                                        <span className="font-bold text-emerald-600 mx-2">{result.sub.cn}</span> 
                                        åœ¨ä½“å¤–å®éªŒ/è§‚æµ‹ç ”ç©¶ä¸­æ˜¾ç¤ºå‡ºå¯¹ 
                                        <span className="font-bold text-red-600 mx-2">{result.dis.cn}</span> 
                                        çš„æ½œåœ¨æ²»ç–—/é¢„é˜²ä½œç”¨ã€‚â€
                                    </p>
                                </div>

                                <div className="space-y-4">
                                    <div className="text-sm text-slate-500 mono-font bg-slate-100 p-2 rounded overflow-x-auto whitespace-normal break-all">
                                        Query: {result.query}
                                    </div>
                                    
                                    <a 
                                        href={result.url} 
                                        target="_blank" 
                                        rel="noopener noreferrer"
                                        className="block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded transition-colors flex items-center justify-center gap-2"
                                    >
                                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                                        åœ¨ PubMed ä¸ŠæŸ¥çœ‹â€œç§‘å­¦è¯æ®â€
                                    </a>
                                    
                                    <p className="text-xs text-center text-slate-400 mt-2">
                                        æ³¨ï¼šå¦‚æœæœç´¢ç»“æœä¸º 0ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªâ€œå®Œå…¨æœªè¢«æ¢ç´¢çš„å¤„å¥³åœ°â€ï¼Œæ›´å€¼å¾—å‘è¡¨ï¼(æˆ–è€…æ¢ä¸ªæ›´æ¨¡ç³Šçš„è¯å†æœä¸€æ¬¡)
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Footer Explaination */}
                    <div className="mt-16 text-slate-500 text-sm max-w-2xl leading-relaxed border-t pt-6 border-slate-200">
                        <h3 className="font-bold text-slate-700 mb-2">ä¸ºä»€ä¹ˆè¿™ä¸ªé¡µé¢å­˜åœ¨ï¼Ÿ</h3>
                        <p>
                            è¿™è®½åˆºäº†å½“ä»Šç§‘ç ”å‡ºç‰ˆç•Œçš„ä¸€ç§ç°è±¡ï¼šå¤§é‡çš„<b>â€œç‚’èœå¼ç§‘ç ”â€</b>ã€‚ç ”ç©¶è€…é€šè¿‡æ’åˆ—ç»„åˆä¸åŒçš„æˆåˆ†å’Œç–¾ç—…ï¼Œåˆ©ç”¨ç»Ÿè®¡å­¦å·¥å…·ï¼ˆP-Hackingï¼‰åœ¨æµ·é‡æ•°æ®ä¸­å¯»æ‰¾å¾®å¼±çš„ç›¸å…³æ€§ï¼Œæˆ–è€…åœ¨åŸ¹å…»çš¿é‡Œç”¨è‡´æ­»å‰‚é‡çš„æå–ç‰©æ€æ­»ç™Œç»†èƒ/ç—…æ¯’ã€‚
                        </p>
                        <p className="mt-2">
                            è¿™äº›ç ”ç©¶å¾€å¾€è™½ç„¶é€šè¿‡äº†åŒè¡Œè¯„å®¡ï¼Œä½†ä¸´åºŠæ„ä¹‰æä½ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä¸€æ—¦è¿›å…¥å¤§ä¼—è§†é‡ï¼Œå°±å˜æˆäº†â€œç§‘å­¦å®¶å‘ç°XXèƒ½æ²»XXâ€ï¼Œå¼•å‘ä¸å¿…è¦çš„ææ…Œæˆ–æŠ¢è´­æ½®ã€‚
                        </p>
                    </div>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
